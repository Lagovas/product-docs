---
title: Installing
bookCollapseSection: true
---
## Installing

Installing Acra is fairly simple:

- For trying Acra really quickly, for hassle-free testing purposes, you can [try Acra with Docker]({{< ref "acra/guides/trying-acra-with-docker/" >}}).
- For another quick start with Acra, you can get a minimalistic version of Acra Community Edition as a 1-Click App running in a [Droplet on DigitalOcean Marketplace](https://marketplace.digitalocean.com/apps/acra). If you're new to DigitalOcean, you can use [Cossack Labs referral code](https://marketplace.digitalocean.com/apps/acra?refcode=3477f5f54884) to register and get $100 for 60 days for free. [More details]({{< ref "acra/guides/advanced-integrations/digital-ocean-marketplace.md" >}}).
- For a real-world hands-on experience, [install Acra from the official Cossack Labs repository]({{< ref "acra/configuring-maintaining/installing#installing-acra-from-the-cossack-labs-repository" >}}) or
- Download and [build Acra from the GitHub repository]({{< ref "acra/configuring-maintaining/installing#installing-from-github" >}}).

### Requirements

- Your application written in Ruby, Python, Go, C++, Node.js, PHP, iOS (Objective-C and Swift), or Android.
- Your application talking to PostgreSQL or MySQL database via your preferred ORM. During the setup of Acra, you will redirect your application to talk to Acra instead.
- Use of TLS to access Acra and the database (our strong recommendation). You might need to configure a TLS certificate for Acra. Otherwise, you'll set up an encrypted transport layer using AcraConnector and [Secure Session]({{< ref "themis/crypto-theory/cryptosystems/secure-session.md" >}}).
- [AcraWriter]({{< ref "acra/acra-in-depth/security-design/#acrawriter-INVALID" >}}) library installed for your application that will encrypt the data inside your app ("client side encryption"). AcraWriter uses [Themis]({{< ref "themis" >}}) and OpenSSL/BoringSSL as dependencies. If you prefer "transparent encryption proxy" mode, no additional libraries will be necessary for your app.
- If you're installing Acra on your server manually from the [GitHub repository](https://github.com/cossacklabs/acra), you need to have Themis' dependencies and `libssl-dev` package installed. Also, make sure that `libcrypto.so` is available in `$PATH`.

### Setup process
- Generate keypair (see how to do it [here]({{< ref "acra/configuring-maintaining/installing#installing-from-github" >}}) or [here in 1.1]({{< ref "acra/acra-in-depth/cryptography-and-key-management/#generating-all-the-acra-keys-in-one-go-INVALID" >}})), which will identify this AcraConnector using `acra-keymaker` utility. AcraServer will recognise this AcraConnector instance by the (previously) specified `<client_id>`.
- Deploy [AcraConnector]({{< ref "acra/security-controls/transport-security/acra-connector.md#acraconnector-and-acrawriter-INVALID" >}}):
  - Add another system user on the machine that runs your application (for AcraConnector).
  - Deploy AcraConnector binaries to run under that user.
  - Distribute the keys: put the keys generated by `acra-keymaker` – `client_id`, `client_id_server.pub`, and `client_id_storage.pub` – into the corresponding `.acrakeys` folder.
  - Run AcraConnector as a service from under this user.
  - Point the database functions in your applications to talk to `localhost:9494` (default port) or any other port you've chosen.
- Deploy [AcraServer]({{< ref "acra/configuring-maintaining/general-configuration/acra-server.md#getting-started-with-acraserver-INVALID" >}}) to a separate machine:
  - Place the keys generated by `acra-keymaker` `client_id.pub`, `client_storage`, and `client_id_server` to the .acrakeys folder.
  - Copy AcraServer public key / Zone key to the `.acrakeys` folder belonging to:
    - AcraConnector's user,
    - Any user that runs AcraWriter code.
- Integrate AcraWriter:
  - Make `client_id_storage.pub` accessible to AcraWriter code.
  - Integrate AcraWriter closely following the [examples](https://github.com/cossacklabs/acra/tree/master/examples) and using either AcraConnector (if available on this machine) or direct database connection.
- Test everything:

  **1.** Connect AcraConnector to AcraServer, send a regular request to your database through AcraConnector.<br/>_Result_: If you see the answer, AcraConnector and AcraWriter are able to connect and forward signals back and forth. It means that the network and the keys are fine.

  **2.** Upon integrating AcraWriter into your code, try generating an [AcraStruct]({{< ref "acra/acra-in-depth/data-structures/#understanding-acrastruct" >}}) from some payload.<br/>_Result_: If you succeed in running AcraWriter code, Themis library is installed properly and some of the keys are located in the expected place.

  **3.** Write a row with AcraStruct into the database, either directly or through AcraConnector. Request this row through AcraConnector.<br/>_Result_: If you see decrypted payload in the response, the scheme works properly.

- Thoroughly read the documentation.
- Use Acra!
- P.S. Feel free to raise an [Issue](https://github.com/cossacklabs/acra/issues) or contact us at [info@cossacklabs.com](mailto:info@cossacklabs.com).

## Quickstart

> Note: Read the documentation before starting out with Acra! There are some fundamental concepts that we highly advise you to understand before you proceed. Pay special attention to the [Architecture]({{< ref "acra/acra-in-depth/data-flow/#-INVALID" >}}).

Also, remember that:

- AcraServer and Acra's dependencies need to stay on a separate server / virtual machine.
- AcraConnector can run in a container or under separate user on the same machine as the main application.


Choose your weapon!;) There are different ways to start out with Acra. You can either:

* [try Acra using Docker]({{< ref "acra/configuring-maintaining/installing#using-acra-with-docker" >}}) (or see [Trying Acra with Docker]({{< ref "acra/guides/trying-acra-with-docker/" >}}) for a more detailed description of the process) - which is the fastest way;
* [install it from the official Cossack Labs repository]({{< ref "acra/configuring-maintaining/installing#installing-acra-from-the-cossack-labs-repository" >}}); or
* [install it from the GitHub repository]({{< ref "acra/configuring-maintaining/installing#installing-from-github" >}}) following the instructions below.


### Using Acra with Docker

> Note: This way of using Acra is for testing purposes only and should never be used for real-life production environments.

For a really quick start, we recommend trying Acra with Docker first. Using only two commands you will get all Acra components and database up and running, with a secure transport layer between them. We prepared several typical infrastructures to play with.

The detailed instructions for installing and operating Acra with Docker can be found in the [Trying Acra with Docker]({{< ref "acra/guides/trying-acra-with-docker/" >}}) documentation page. Bear in mind that this way of using Acra is for testing purposes only and should never be used for real-life production environments.

If you want to try Acra in your real-life setting, use the installation instructions below and either install Acra from our [official Cossack Labs repository]({{< ref "acra/configuring-maintaining/installing#installing-acra-from-the-cossack-labs-repository" >}}) or from the [GitHub Acra repository]({{< ref "acra/configuring-maintaining/installing#installing-from-github" >}}).

### Installing Acra from the Cossack Labs repository

> Note: A quick reminder - the server-side Acra components are not compatible with Windows OS as host OS, consider [using Docker]({{< ref "acra/guides/trying-acra-with-docker/" >}}).

### Debian / Ubuntu

**1. Import the public key used by Cossack Labs to sign packages:**

```console
wget -qO - https://pkgs.cossacklabs.com/gpg | sudo apt-key add -
```    

> Note: If you wish to validate the key fingerprint, it is: `29CF C579 AD90 8838 3E37 A8FA CE53 BCCA C8FF FACB`.

**2. You may need to install the `apt-transport-https` package before proceeding:**

```console
sudo apt-get install apt-transport-https
```    

**3. Add the Cossack Labs repository to your `sources.list`.**        
You should add a line that specifies your OS name and the release name:

```console
deb https://pkgs.cossacklabs.com/stable/$OS $RELEASE main
```    

* `$OS` should be `debian` or `ubuntu`.
* `$RELEASE` should be one of Debian or Ubuntu release names. You can determine this by running `lsb_release -cs`, if you have `lsb_release` installed.

We currently build packages for the following OSs and RELEASE combinations:

- *CentOS 7*,
- *Debian "Jessie" (Debian 8)*,
- *Debian "Stretch" (Debian 9)*,
- *Ubuntu Xenial Xerus (Ubuntu 16.04)*,
- *Ubuntu Artful Aardvark (Ubuntu 17.10)*,
- *Ubuntu Bionic Beaver (Ubuntu 18.04)*.

For example, if you are running *Debian 9 "Stretch"*, run:

```console
echo "deb https://pkgs.cossacklabs.com/stable/debian stretch main" | \
  sudo tee /etc/apt/sources.list.d/cossacklabs.list
```    

**4. Reload local package database:**

```console
sudo apt-get update
```    

**5. Install the package**

```console
sudo apt-get install acra
```

### CentOS / RHEL / OEL

> Note: We only build RPM packages for x86_64.

**1. Import the public key used by Cossack Labs to sign packages:**

```console
sudo rpm --import https://pkgs.cossacklabs.com/gpg
```
> Note: If you wish to validate the key fingerprint, it is: `29CF C579 AD90 8838 3E37 A8FA CE53 BCCA C8FF FACB`.

**2. Create a Yum repository file for Cossack Labs package repository:**

```console
wget -qO - https://pkgs.cossacklabs.com/stable/centos/cossacklabs.repo | \
  sudo tee /etc/yum.repos.d/cossacklabs.repo
```    

**3. Install the package:**

```console
sudo yum install acra
```

That's it! You've successfully installed Acra from the Cossack Labs repository.

### Installing from GitHub

These are the instruction for installation of [AcraServer]({{< ref "acra/configuring-maintaining/general-configuration/acra-server.md#-INVALID" >}}) from the [Cossack Labs' GitHub repository for Acra](https://github.com/cossacklabs/acra/). You will need the same set of dependencies for each component.

#### Installing the dependencies

Install the dependencies for Acra:

```
sudo apt-get install git golang libssl-dev make build-essential
```

Set up your `$GOPATH` to some place where you will store the code.

#### Install [Themis](https://www.github.com/cossacklabs/themis)

```
git clone https://github.com/cossacklabs/themis.git
cd themis
make
sudo make install
```

#### Build the key generator and generate the keys

```
go get github.com/cossacklabs/acra/cmd/acra-keymaker
```

Then generate the [keys]({{< ref "acra/acra-in-depth/cryptography-and-key-management/#generating-all-the-acra-keys-in-one-go-INVALID" >}}) and distribute them across the infrastructure.

Remember to generate `ACRA_MASTER_KEY` and assign it to the environmental variable!

#### Set up the environment for AcraServer

On a separate machine, create a user for AcraServer:
```
sudo useradd -m acra-server
sudo su acra-server
cd ~/
export GOPATH=`pwd`
```

#### Build AcraServer

```
go get github.com/cossacklabs/acra/cmd/acra-server
```    

Place `someid.pub`, `someid_storage` and `someid_server` keys to .acrakeys directory for AcraServer.
Now you can finally launch the AcraServer.

#### Launching AcraServer

Running AcraServer is easy, just point it to the database:

```
$GOPATH/bin/acra-server --db_host=127.0.0.1
```

If you see an error message `"master key is empty"`, it means that you haven't generated `ACRA_MASTER_KEY`, please return to the [Key Generation step]({{< ref "acra/configuring-maintaining/installing#installing-from-github" >}}).

> You can complement the command above with `--db_port=5432 -v` to adjust the listener port and add logs to get going quickly. For all the available CLI parameters, refer to the corresponding section in [How AcraServer works]({{< ref "acra/configuring-maintaining/general-configuration/acra-server.md#acraserver-cli-reference-INVALID" >}}).

AcraServer listens to port 9393 by default.

### AcraConnector

Create a user for AcraConnector:

```
sudo useradd -m acra-connector
sudo su acra-connector
cd ~/
export GOPATH=`pwd`
```

#### Build AcraConnector

```
go get github.com/cossacklabs/acra/cmd/acra-connector
```
Put `someid` and `someid_server.pub` keys into .acrakeys directory for AcraConnector.

#### Run AcraConnector

```
$GOPATH/bin/acra-connector --acraserver_connection_host=127.0.0.1 --client_id=someid -v
```

If you see error message similar to "Configuration error: AcraConnector private key .acrakeys/someid doesn't exists", it means that you haven't generated keys or keys are placed in a wrong folder, please return to the [Key Generation step]({{< ref "acra/configuring-maintaining/installing/#build-the-key-generator-and-generate-the-keys" >}}).

AcraConnector is now listening on the localhost port **9494**.